(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{72:function(e,t,n){},73:function(e,t,n){},98:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(8),c=n.n(i),o=(n(72),n.p,n(73),n(17)),s=n(11),l="LOGIN_REQUEST",u="LOGIN_SUCCESS",d="LOGIN_FAILURE",j="LOGOUT_REQUEST",p="LOGOUT_SUCCESS",g=function(e,t){return function(n){return n(function(e){return{type:l,creds:e}}(e)),console.log(JSON.stringify(e)),fetch("http://localhost:5000/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){if(console.log(e),e.ok)return console.log(e),e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw e})).then((function(e){return e.json()})).then((function(e){if(!e.success){var a=new Error("Error "+e.status);throw alert(a),a.response=e,a}localStorage.setItem("token",e.token),console.log(e.response),n(function(e){return{type:u,token:e.token,user:e.response}}(e)),t.push("/profile")})).catch((function(e){return n((t=e.message,{type:d,message:t}));var t}))}},h=function(e,t){return function(n){return n(function(e){return{type:"SIGNUP_REQUEST",creds:e}}(e)),console.log(JSON.stringify(e)),fetch("http://localhost:5000/users/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){if(console.log(e),e.ok)return console.log(e),e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw e})).then((function(e){return e.json()})).then((function(e){if(!e.success){var a=new Error("Error "+e.status);throw a.response=e,a}n(function(e){return{type:"SIGNUP_SUCCESS",token:e.token}}(e)),t.push("/login")})).catch((function(e){return n({type:"SIGNUP_FAILURE",message:e.message})}))}},f=function(){return function(e){e({type:j}),localStorage.removeItem("token"),localStorage.removeItem("creds"),e({type:p})}},b=n(20),m=n(14),O=n(126),x=n(129),v=n(131),y=n(132),S=n(3),w=Object(O.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",marginTop:"100px",justifyContent:"center","& > *":{margin:e.spacing(),marginLeft:e.spacing(2),marginRight:e.spacing(2),width:e.spacing(50),height:e.spacing(30)}},paper:{height:"400px"},field:{marginTop:"20px",display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:"center"},inputStyle:{}}}));var C=Object(s.g)(Object(b.b)((function(e){return{auth:e.auth}}),(function(e){return{loginUser:function(t,n){return e(g(t,n))}}}))((function(e){var t=w(),n=Object(a.useState)(""),r=Object(m.a)(n,2),i=r[0],c=r[1],o=Object(a.useState)(""),s=Object(m.a)(o,2),l=s[0],u=s[1];return Object(S.jsxs)("div",{className:t.root,children:[Object(S.jsx)("header",{style:{marginTop:"-30px",marginBottom:"50px",width:"100%",height:"20%",fontSize:"40px",color:"#dc143c",fontFamily:"monospace"},children:"Mern App"}),Object(S.jsxs)(x.a,{className:t.paper,children:[Object(S.jsx)("div",{className:t.field,children:Object(S.jsx)(v.a,{id:"username",name:"username",label:"Email*",variant:"outlined",onChange:function(e){return c(e.target.value)}})}),Object(S.jsx)("div",{className:t.field,children:Object(S.jsx)(v.a,{id:"password",name:"password",label:"Password*",type:"password",variant:"outlined",onChange:function(e){return u(e.target.value)}})}),Object(S.jsx)("div",{className:t.field,children:Object(S.jsx)(y.a,{variant:"contained",color:"primary",onClick:function(){e.loginUser({username:i,password:l},e.history)},children:"Login"})}),Object(S.jsx)("div",{style:{cursor:"pointer"},onClick:function(){return e.history.push("/signup")},children:"Not a member, Register!"})]})]})}))),N=Object(O.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",marginTop:"100px",justifyContent:"center","& > *":{margin:e.spacing(),marginLeft:e.spacing(2),marginRight:e.spacing(2),width:e.spacing(50),height:e.spacing(30)}},paper:{height:"400px"},field:{marginTop:"20px",display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:"center"},inputStyle:{}}}));var E=Object(s.g)(Object(b.b)((function(e){return{auth:e.auth}}),(function(e){return{signupUser:function(t,n){return e(h(t,n))}}}))((function(e){var t=N(),n=Object(a.useState)(""),r=Object(m.a)(n,2),i=r[0],c=r[1],o=Object(a.useState)(""),s=Object(m.a)(o,2),l=s[0],u=s[1],d=Object(a.useState)(""),j=Object(m.a)(d,2),p=j[0],g=j[1],h=Object(a.useState)(""),f=Object(m.a)(h,2),b=f[0],O=f[1];return Object(S.jsxs)("div",{className:t.root,children:[Object(S.jsx)("header",{style:{marginTop:"-30px",marginBottom:"50px",width:"100%",height:"20%",fontSize:"40px",color:"#dc143c",fontFamily:"monospace"},children:"Mern App"}),Object(S.jsxs)(x.a,{className:t.paper,children:[Object(S.jsx)("div",{className:t.field,children:Object(S.jsx)(v.a,{id:"name",name:"name",label:"Name*",variant:"outlined",onChange:function(e){return c(e.target.value)}})}),Object(S.jsx)("div",{className:t.field,children:Object(S.jsx)(v.a,{id:"username",name:"username",label:"Email*",variant:"outlined",onChange:function(e){return u(e.target.value)}})}),Object(S.jsx)("div",{className:t.field,children:Object(S.jsx)(v.a,{id:"password",name:"password",label:"Password*",variant:"outlined",onChange:function(e){return g(e.target.value)}})}),Object(S.jsx)("div",{className:t.field,children:Object(S.jsx)(v.a,{id:"confirmPwd",name:"confirmPwd",label:"Confirm Password*",variant:"outlined",onChange:function(e){return O(e.target.value)}})}),Object(S.jsx)("div",{className:t.field,children:Object(S.jsx)(y.a,{variant:"contained",color:"primary",onClick:function(){p==b?(console.log(e),e.signupUser({username:l,name:i,password:p,email:l},e.history)):p!=b&&alert("Password and Confirm Password do not match")},children:"Sign up"})}),Object(S.jsx)("div",{style:{cursor:"pointer"},onClick:function(){return e.history.push("/login")},children:"Already a member, Login!"})]})]})}))),U=n(133),k=n(41),T=n.n(k),I=(n(97),Object(O.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",marginTop:"100px",justifyContent:"center","& > *":{margin:e.spacing(1),marginLeft:e.spacing(2),marginRight:e.spacing(2),width:e.spacing(50),height:e.spacing(30)}},paper:{display:"flex",justifyContent:"space-around",alignItems:"center",paddingLeft:"20px"},field:{marginTop:"20px",display:"flex",justifyContent:"space-around",alignItems:"center"},inputStyle:{}}})));var L=Object(s.g)(Object(b.b)((function(e){return{auth:e.auth}}),null)((function(e){var t=I(),n=Object(a.useState)(""),r=Object(m.a)(n,2),i=r[0],c=r[1],o=Object(a.useState)(""),s=Object(m.a)(o,2),l=s[0],u=s[1],d=Object(a.useState)(""),j=Object(m.a)(d,2),p=j[0],g=j[1],h=Object(a.useState)(),f=Object(m.a)(h,2),b=f[0],O=f[1],v=Object(a.useState)(!0),w=Object(m.a)(v,2),C=w[0],N=w[1],E=Object(a.useState)(!1),k=Object(m.a)(E,2),L=k[0],A=k[1];return Object(a.useEffect)((function(){var e="Bearer "+localStorage.getItem("token");T.a.get("/profile",{headers:{Authorization:e,"Content-Type":"application/json"}}).then((function(e){console.log(e),c(e.data[0].name),u(e.data[0].email),g(e.data[0].avatar)}))}),[]),Object(S.jsx)("div",{className:t.root,children:Object(S.jsxs)(x.a,{children:[Object(S.jsxs)("div",{className:t.field,children:[Object(S.jsx)(U.a,{alt:"Remy Sharp",src:"http://localhost:5000/".concat(p),style:{width:"60px",height:"60px"}}),Object(S.jsx)("input",{type:"file",id:"profile",name:"profile",style:{display:C?"none":""},onChange:function(e){return O(e.target.files[0])}})," "]}),Object(S.jsxs)("div",{className:t.field,children:["Name: ",Object(S.jsx)("input",{className:t.inputStyle,id:"title",name:"title",value:i,disabled:C,onChange:function(e){return c(e.target.value)}})]}),Object(S.jsxs)("div",{className:t.field,children:["Email: ",Object(S.jsx)("input",{className:t.inputStyle,id:"email",name:"email",value:l,disabled:C,onChange:function(e){return u(e.target.value)}})]}),Object(S.jsxs)("div",{className:t.field,children:[Object(S.jsx)(y.a,{variant:"contained",color:"primary",disabled:L,onClick:function(){A(!0),N(!1)},children:"Edit"}),Object(S.jsx)(y.a,{variant:"contained",color:"primary",onClick:function(){var e=new FormData;e.append("imageFile",b);var t="Bearer "+localStorage.getItem("token");T()({url:"/imageUpload",method:"POST",data:e,headers:{Authorization:t}}).then((function(e){console.log(e.data)})).catch((function(e){return console.log(e)}));var n={name:i,email:l};T()({url:"/profile",method:"PATCH",data:n,headers:{Authorization:t}}).then((function(e){c(e.data[0].name),u(e.data[0].name),g(e.data[0].avatar)})).catch((function(e){console.log(e)}))},disabled:C,children:"Save"})]})]})})})));var A=Object(s.g)(Object(b.b)((function(e){return{auth:e.auth}}),(function(e){return{signupUser:function(t,n){return e(h(t,n))},loginUser:function(t,n){return e(g(t,n))},logoutUser:function(){return e(f())}}}))((function(e){return Object(a.useEffect)((function(){console.log(e.signupUser)}),[]),Object(S.jsxs)(s.d,{children:[Object(S.jsx)(s.b,{exact:!0,path:"/login",component:function(e){return Object(S.jsx)(C,Object(o.a)({loginUser:e.loginUser},e))}}),Object(S.jsx)(s.b,{exact:!0,path:"/signup",component:function(e){return Object(S.jsx)(E,{signupUser:e.signupUser})}}),Object(S.jsx)(s.b,{exact:!0,path:"/profile",component:function(e){return Object(S.jsx)(L,{})}}),Object(S.jsx)(s.a,{to:"/login"})]})}))),P=n(29),F=n(42),R=n(59),G=n(60),_=n.n(G),B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!1,isAuthenticated:!!localStorage.getItem("token"),token:localStorage.getItem("token"),errMess:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(o.a)(Object(o.a)({},e),{},{isLoading:!0,isAuthenticated:!1});case u:return Object(o.a)(Object(o.a)({},e),{},{isLoading:!1,isAuthenticated:!0,errMess:"",token:t.token,user:t.user});case d:return Object(o.a)(Object(o.a)({},e),{},{isLoading:!1,isAuthenticated:!1,errMess:t.message});case j:return Object(o.a)(Object(o.a)({},e),{},{isLoading:!0,isAuthenticated:!0});case p:return Object(o.a)(Object(o.a)({},e),{},{isLoading:!1,isAuthenticated:!1,token:"",user:null});default:return e}},J=Object(F.c)(Object(F.b)({auth:B}),Object(F.a)(R.a,_.a));var M=function(){return Object(S.jsx)(b.a,{store:J,children:Object(S.jsx)(P.a,{children:Object(S.jsx)("div",{className:"App",children:Object(S.jsx)(A,{})})})})},z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,135)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),i(e),c(e)}))};c.a.render(Object(S.jsx)(r.a.StrictMode,{children:Object(S.jsx)(M,{})}),document.getElementById("root")),z()}},[[98,1,2]]]);
//# sourceMappingURL=main.08dfa146.chunk.js.map